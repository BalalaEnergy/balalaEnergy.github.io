
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>观察者模式 · GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    
    <link rel="prev" href="策略模式.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    设计模式
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../chapter0/">
            
                <a href="../chapter0/">
            
                    
                    面向对象设计原则SOLID
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../chapter0/单一职责原则.html">
            
                <a href="../chapter0/单一职责原则.html">
            
                    
                    Single Responsibility Principle：单一职责原则
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../chapter0/开闭原则.html">
            
                <a href="../chapter0/开闭原则.html">
            
                    
                    Open Closed Principle：开闭原则
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../chapter0/里氏替换原则.html">
            
                <a href="../chapter0/里氏替换原则.html">
            
                    
                    Liskov Substitution Principle：里氏替换原则
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="../chapter0/接口隔离原则.html">
            
                <a href="../chapter0/接口隔离原则.html">
            
                    
                    Interface Segregation Principle：接口隔离原则
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="../chapter0/依赖倒置原则.html">
            
                <a href="../chapter0/依赖倒置原则.html">
            
                    
                    Dependence Inversion Principle：依赖倒置原则
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6" data-path="../chapter0/迪米特法则.html">
            
                <a href="../chapter0/迪米特法则.html">
            
                    
                    Law of Demeter：迪米特法则
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.7" data-path="../chapter0/聚合复用原则.html">
            
                <a href="../chapter0/聚合复用原则.html">
            
                    
                    Composite/Aggregate Reuse Principle：聚合复用原则
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../chapter1/">
            
                <a href="../chapter1/">
            
                    
                    创建型模式
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../chapter1/工厂模式.html">
            
                <a href="../chapter1/工厂模式.html">
            
                    
                    工厂方法
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../chapter2/">
            
                <a href="../chapter2/">
            
                    
                    结构型模式
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="./">
            
                <a href="./">
            
                    
                    行为型模式
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="模板方法.html">
            
                <a href="模板方法.html">
            
                    
                    模板方法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="策略模式.html">
            
                <a href="策略模式.html">
            
                    
                    策略模式
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.5.3" data-path="观察者模式.html">
            
                <a href="观察者模式.html">
            
                    
                    观察者模式
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >观察者模式</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="&#x89C2;&#x5BDF;&#x8005;&#x6A21;&#x5F0F;-observer-pattern">&#x89C2;&#x5BDF;&#x8005;&#x6A21;&#x5F0F; Observer Pattern</h1>
<h3 id="&#x5B9A;&#x4E49;">&#x5B9A;&#x4E49;</h3>
<blockquote>
<p>&#x5B9A;&#x4E49;&#x5BF9;&#x8C61;&#x95F4;&#x7684;&#x4E00;&#x79CD;&#x4E00;&#x5BF9;&#x591A;&#xFF08;&#x53D8;&#x5316;&#xFF09;&#x7684;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#xFF0C;&#x5F53;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x7684;&#x72B6;&#x6001;&#x53D1;&#x751F;&#x6539;&#x53D8;&#x65F6;&#xFF0C;&#x6240;&#x6709;&#x4F9D;&#x8D56;&#x4E8E;&#x5B83;&#x7684;&#x5BF9;&#x8C61;&#x90FD;&#x5F97;&#x5230;&#x901A;&#x77E5;&#x5E76;&#x88AB;&#x81EA;&#x52A8;&#x66F4;&#x65B0; &#x2014;&#x2014;&#x300A;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x300B;GoF</p>
</blockquote>
<h3 id="&#x4E3A;&#x4F55;&#x4F7F;&#x7528;">&#x4E3A;&#x4F55;&#x4F7F;&#x7528;</h3>
<p>&#x5728;&#x8F6F;&#x4EF6;&#x6784;&#x5EFA;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x4E3A;&#x67D0;&#x4E9B;&#x5BF9;&#x8C61;&#x5EFA;&#x7ACB;&#x4E00;&#x79CD;&#x201C;&#x901A;&#x77E5;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#x201D;&#xFF0C;&#x5373;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#xFF08;&#x76EE;&#x6807;&#x5BF9;&#x8C61;&#xFF09;&#x7684;&#x72B6;&#x6001;&#x53D1;&#x751F;&#x6539;&#x53D8;&#xFF0C;&#x6240;&#x6709;&#x4F9D;&#x8D56;&#x7684;&#x5BF9;&#x8C61;&#xFF08;&#x89C2;&#x5BDF;&#x8005;&#x5BF9;&#x8C61;&#xFF09;&#x90FD;&#x5C06;&#x5F97;&#x5230;&#x901A;&#x77E5;&#x3002;&#x5982;&#x679C;&#x8FD9;&#x6837;&#x7684;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#x8FC7;&#x4E8E;&#x7D27;&#x5BC6;&#xFF0C;&#x5C06;&#x4F7F;&#x8F6F;&#x4EF6;&#x4E0D;&#x80FD;&#x5F88;&#x597D;&#x7684;&#x62B5;&#x5FA1;&#x53D8;&#x5316;&#x3002;
&#x4F7F;&#x7528;&#x9762;&#x5411;&#x5BF9;&#x8C61;&#x6280;&#x672F;&#xFF0C;&#x53EF;&#x4EE5;&#x5C06;&#x8FD9;&#x79CD;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#x5F31;&#x5316;&#xFF0C;&#x5E76;&#x5F62;&#x6210;&#x4E00;&#x79CD;&#x7A33;&#x5B9A;&#x7684;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#xFF0C;&#x4ECE;&#x800C;&#x5B9E;&#x73B0;&#x8F6F;&#x4EF6;&#x4F53;&#x7CFB;&#x7ED3;&#x6784;&#x7684;&#x677E;&#x8026;&#x5408;&#x3002;</p>
<h3 id="&#x4F55;&#x65F6;&#x4F7F;&#x7528;">&#x4F55;&#x65F6;&#x4F7F;&#x7528;</h3>
<p>&#x4E00;&#x4E2A;&#x62BD;&#x8C61;&#x6A21;&#x578B;&#x6709;&#x4E24;&#x4E2A;&#x65B9;&#x9762;&#xFF0C;&#x5176;&#x4E2D;&#x4E00;&#x4E2A;&#x65B9;&#x9762;&#x4F9D;&#x8D56;&#x4E8E;&#x53E6;&#x4E00;&#x4E2A;&#x65B9;&#x9762;&#x3002;&#x5C06;&#x8FD9;&#x4E8C;&#x8005;&#x5C01;&#x88C5;&#x5728;&#x72EC;&#x7ACB;&#x7684;&#x5BF9;&#x8C61;&#x4E2D;&#xFF0C;&#x4EE5;&#x4F7F;&#x5B83;&#x4EEC;&#x53EF;&#x4EE5;&#x5404;&#x81EA;&#x72EC;&#x7ACB;&#x7684;&#x6539;&#x53D8;&#x548C;&#x590D;&#x7528;&#x3002; &#x5BF9;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x7684;&#x6539;&#x53D8;&#x9700;&#x8981;&#x540C;&#x65F6;&#x6539;&#x53D8;&#x5176;&#x4ED6;&#x5BF9;&#x8C61;&#xFF0C;&#x800C;&#x4E0D;&#x77E5;&#x9053;&#x5177;&#x4F53;&#x6709;&#x591A;&#x5C11;&#x5BF9;&#x8C61;&#x6709;&#x5F85;&#x6539;&#x53D8;&#x3002;
&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x5FC5;&#x987B;&#x901A;&#x77E5;&#x5176;&#x4ED6;&#x5BF9;&#x8C61;&#xFF0C;&#x800C;&#x5B83;&#x4EEC;&#x53C8;&#x4E0D;&#x80FD;&#x5047;&#x5B9A;&#x5176;&#x4ED6;&#x5BF9;&#x8C61;&#x662F;&#x8C01;&#x3002;&#x6362;&#x8A00;&#x4E4B;&#xFF0C;&#x4F60;&#x4E0D;&#x5E0C;&#x671B;&#x8FD9;&#x4E9B;&#x5BF9;&#x8C61;&#x65F6;&#x7D27;&#x5BC6;&#x8026;&#x5408;&#x7684;&#x3002; &#x53EF;&#x4EE5;java&#x7684;Observer&#x63A5;&#x53E3;&#x548C;Observable&#xFF0C;&#x6216;&#x4F7F;&#x7528;&#x7B2C;&#x4E09;&#x65B9;&#x5305;&#xFF0C;&#x5982;guava&#x6765;&#x5B9E;&#x73B0;&#x3002;</p>
<h3 id="&#x63A8;&#x6A21;&#x578B;&#x548C;&#x62C9;&#x6A21;&#x578B;">&#x63A8;&#x6A21;&#x578B;&#x548C;&#x62C9;&#x6A21;&#x578B;</h3>
<p>&#x5728;&#x89C2;&#x5BDF;&#x8005;&#x6A21;&#x5F0F;&#x4E2D;&#xFF0C;&#x53C8;&#x5206;&#x4E3A;&#x62C9;&#x6A21;&#x578B;&#x548C;&#x63A8;&#x6A21;&#x578B;&#x4E24;&#x79CD;&#x65B9;&#x5F0F;&#x3002;</p>
<h4 id="&#x63A8;&#x6A21;&#x578B;">&#x63A8;&#x6A21;&#x578B;</h4>
<p>&#x4E3B;&#x9898;&#x5BF9;&#x8C61;&#x5411;&#x89C2;&#x5BDF;&#x8005;&#x63A8;&#x9001;&#x4E3B;&#x9898;&#x7684;&#x8BE6;&#x7EC6;&#x4FE1;&#x606F;&#xFF0C;&#x4E0D;&#x7BA1;&#x89C2;&#x5BDF;&#x8005;&#x662F;&#x5426;&#x9700;&#x8981;&#xFF0C;&#x63A8;&#x9001;&#x7684;&#x4FE1;&#x606F;&#x901A;&#x5E38;&#x662F;&#x4E3B;&#x9898;&#x5BF9;&#x8C61;&#x7684;&#x5168;&#x90E8;&#x6216;&#x90E8;&#x5206;&#x4FE1;&#x606F;&#x3002;</p>
<h4 id="&#x62C9;&#x6A21;&#x578B;">&#x62C9;&#x6A21;&#x578B;</h4>
<p>&#x4E3B;&#x9898;&#x5BF9;&#x8C61;&#x5728;&#x901A;&#x77E5;&#x89C2;&#x5BDF;&#x8005;&#x65F6;&#xFF0C;&#x53EA;&#x63A8;&#x9001;&#x5C11;&#x91CF;&#x7684;&#x4FE1;&#x606F;&#xFF0C;&#x5982;&#x679C;&#x89C2;&#x5BDF;&#x8005;&#x9700;&#x8981;&#x66F4;&#x5177;&#x4F53;&#x7684;&#x4FE1;&#x606F;&#xFF0C;&#x7531;&#x89C2;&#x5BDF;&#x8005;&#x4E3B;&#x52A8;&#x5230;&#x4E3B;&#x9898;&#x5BF9;&#x8C61;&#x4E2D;&#x8FDB;&#x884C;&#x83B7;&#x53D6;&#xFF0C;&#x76F8;&#x5F53;&#x4E8E;&#x65F6;&#x89C2;&#x5BDF;&#x8005;&#x6839;&#x636E;&#x9700;&#x8981;&#x4ECE;&#x4E3B;&#x9898;&#x5BF9;&#x8C61;&#x4E2D;&#x62C9;&#x6570;&#x636E;&#x3002;&#x4E00;&#x822C;&#x8FD9;&#x79CD;&#x6A21;&#x578B;&#x7684;&#x5B9E;&#x73B0;&#x4E2D;&#xFF0C;&#x4F1A;&#x628A;&#x4E3B;&#x9898;&#x5BF9;&#x8C61;&#x81EA;&#x8EAB;&#x901A;&#x8FC7;update&#x65B9;&#x6CD5;&#x4F20;&#x9012;&#x7ED9;&#x89C2;&#x5BDF;&#x8005;&#xFF0C;&#x8FD9;&#x6837;&#x89C2;&#x5BDF;&#x8005;&#x9700;&#x8981;&#x83B7;&#x53D6;&#x6570;&#x636E;&#x65F6;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8FD9;&#x4E2A;&#x5F15;&#x7528;&#x6765;&#x8FDB;&#x884C;&#x83B7;&#x53D6;&#x4E86;&#x3002;</p>
<h5 id="&#x63A8;&#x6A21;&#x578B;&#x4EE3;&#x7801;">&#x63A8;&#x6A21;&#x578B;&#x4EE3;&#x7801;</h5>
<pre><code class="lang-java"><span class="hljs-keyword">package</span> ObserverPattern;

<span class="hljs-keyword">import</span> java.util.ArrayList;
<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PushObserverPattern</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{
        ConcreteSubject subject = <span class="hljs-keyword">new</span> ConcreteSubject();

        ConcreteObserverOne observerOne = <span class="hljs-keyword">new</span> ConcreteObserverOne();
        ConcreteObserverTwo observerTwo = <span class="hljs-keyword">new</span> ConcreteObserverTwo();

        subject.register(observerOne);
        subject.register(observerTwo);
        subject.change(<span class="hljs-string">&quot;start&quot;</span>);
        System.out.println(<span class="hljs-string">&quot;observerOne state is &quot;</span> + observerOne.getState());
        System.out.println(<span class="hljs-string">&quot;observerTwo state is &quot;</span> + observerTwo.getState());
        subject.change(<span class="hljs-string">&quot;end&quot;</span>);
        System.out.println(<span class="hljs-string">&quot;observerOne state is &quot;</span> + observerOne.getState());
        System.out.println(<span class="hljs-string">&quot;observerTwo state is &quot;</span> + observerTwo.getState());
    }
}

<span class="hljs-keyword">abstract</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Subject</span> </span>{

    <span class="hljs-comment">// &#x9700;&#x8981;&#x901A;&#x77E5;&#x7684;&#x5BF9;&#x8C61;</span>
    <span class="hljs-keyword">private</span> List&lt;Observer&gt; list = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();

    <span class="hljs-comment">// &#x6CE8;&#x518C;&#x89C2;&#x5BDF;&#x8005;</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">register</span><span class="hljs-params">(Observer object)</span> </span>{
        list.add(object);
    }

    <span class="hljs-comment">// &#x6CE8;&#x9500;&#x89C2;&#x5BDF;&#x8005;</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">destroy</span><span class="hljs-params">(Observer object)</span> </span>{
        list.remove(object);
    }

    <span class="hljs-comment">// &#x901A;&#x77E5;&#x6240;&#x6709;&#x5DF2;&#x6CE8;&#x518C;&#x7684;&#x89C2;&#x5BDF;&#x8005;</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">notifyObservers</span><span class="hljs-params">(String state)</span> </span>{
        list.forEach(observer -&gt; observer.update(state));
    }
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ConcreteSubject</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Subject</span> </span>{
    <span class="hljs-keyword">private</span> String state;

    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getState</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> state;
    }

    <span class="hljs-comment">// &#x5F53;&#x9700;&#x8981;&#x901A;&#x77E5;&#x5176;&#x4ED6;&#x89C2;&#x5BDF;&#x8005;&#x65F6;&#xFF0C;&#x8C03;&#x7528;&#x8BE5;&#x65B9;&#x6CD5;</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">change</span><span class="hljs-params">(String state)</span> </span>{
        <span class="hljs-keyword">this</span>.state = state;
        notifyObservers(state);
    }
}

<span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Observer</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">update</span><span class="hljs-params">(String message)</span></span>;
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ConcreteObserverOne</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Observer</span> </span>{

    <span class="hljs-keyword">private</span> String state;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">update</span><span class="hljs-params">(String state)</span> </span>{
        <span class="hljs-keyword">this</span>.state = state;
        System.out.println(<span class="hljs-string">&quot;ObserverOne is updated, state is &quot;</span> + state);
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getState</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> state;
    }
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ConcreteObserverTwo</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Observer</span> </span>{

    <span class="hljs-keyword">private</span> String state;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">update</span><span class="hljs-params">(String state)</span> </span>{
        <span class="hljs-keyword">this</span>.state = state;
        System.out.println(<span class="hljs-string">&quot;ObserverTwo is updated, state is &quot;</span> + state);
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getState</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> state;
    }
}
</code></pre>
<pre><code>&#x8FD0;&#x884C;&#x7ED3;&#x679C;&#xFF1A;
ObserverOne is updated, state is start
ObserverTwo is updated, state is start
observerOne state is start
observerTwo state is start
ObserverOne is updated, state is end
ObserverTwo is updated, state is end
observerOne state is end
observerTwo state is end
</code></pre><h5 id="&#x62C9;&#x6A21;&#x578B;&#x4EE3;&#x7801;">&#x62C9;&#x6A21;&#x578B;&#x4EE3;&#x7801;</h5>
<pre><code class="lang-java"><span class="hljs-keyword">package</span> ObserverPattern.pull;

<span class="hljs-keyword">import</span> java.util.ArrayList;
<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PullObserverPattern</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{
        ConcreteSubject subject = <span class="hljs-keyword">new</span> ConcreteSubject();

        ConcreteObserverOne observerOne = <span class="hljs-keyword">new</span> ConcreteObserverOne();
        ConcreteObserverTwo observerTwo = <span class="hljs-keyword">new</span> ConcreteObserverTwo();

        subject.register(observerOne);
        subject.register(observerTwo);
        subject.change(<span class="hljs-string">&quot;start&quot;</span>);
        subject.change(<span class="hljs-string">&quot;end&quot;</span>);
    }
}

<span class="hljs-keyword">abstract</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Subject</span> </span>{

    <span class="hljs-comment">// &#x9700;&#x8981;&#x901A;&#x77E5;&#x7684;&#x5BF9;&#x8C61;</span>
    <span class="hljs-keyword">private</span> List&lt;Observer&gt; list = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();

    <span class="hljs-comment">// &#x6CE8;&#x518C;&#x89C2;&#x5BDF;&#x8005;</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">register</span><span class="hljs-params">(Observer object)</span> </span>{
        list.add(object);
    }

    <span class="hljs-comment">// &#x6CE8;&#x9500;&#x89C2;&#x5BDF;&#x8005;</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">destroy</span><span class="hljs-params">(Observer object)</span> </span>{
        list.remove(object);
    }

    <span class="hljs-comment">// &#x901A;&#x77E5;&#x6240;&#x6709;&#x5DF2;&#x6CE8;&#x518C;&#x7684;&#x89C2;&#x5BDF;&#x8005;</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">notifyObservers</span><span class="hljs-params">()</span> </span>{
        list.forEach(observer -&gt; observer.update(<span class="hljs-keyword">this</span>));
    }
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ConcreteSubject</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Subject</span> </span>{
    <span class="hljs-keyword">private</span> String state;
    <span class="hljs-keyword">private</span> String previousState;

    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getState</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> state;
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getPreviousState</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> previousState;
    }

    <span class="hljs-comment">// &#x5F53;&#x9700;&#x8981;&#x901A;&#x77E5;&#x5176;&#x4ED6;&#x89C2;&#x5BDF;&#x8005;&#x65F6;&#xFF0C;&#x8C03;&#x7528;&#x8BE5;&#x65B9;&#x6CD5;</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">change</span><span class="hljs-params">(String state)</span> </span>{
        <span class="hljs-keyword">this</span>.previousState = <span class="hljs-keyword">this</span>.state;
        <span class="hljs-keyword">this</span>.state = state;
        notifyObservers();
    }
}

<span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Observer</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">update</span><span class="hljs-params">(Subject subject)</span></span>;
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ConcreteObserverOne</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Observer</span> </span>{

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">update</span><span class="hljs-params">(Subject subject)</span> </span>{
        System.out.println(<span class="hljs-string">&quot;ObserverOne is updated&quot;</span>);
    }
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ConcreteObserverTwo</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Observer</span> </span>{

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">update</span><span class="hljs-params">(Subject subject)</span> </span>{
        System.out.println(<span class="hljs-string">&quot;ObserverTwo is updated&quot;</span>);
    }
}
</code></pre>
<h3 id="&#x4E24;&#x79CD;&#x6A21;&#x5F0F;&#x7684;&#x6BD4;&#x8F83;">&#x4E24;&#x79CD;&#x6A21;&#x5F0F;&#x7684;&#x6BD4;&#x8F83;</h3>
<ul>
<li>&#x63A8;&#x6A21;&#x578B;&#x662F;&#x5047;&#x5B9A;&#x4E3B;&#x9898;&#x5BF9;&#x8C61;&#x77E5;&#x9053;&#x89C2;&#x5BDF;&#x8005;&#x5BF9;&#x8C61;&#x9700;&#x8981;&#x7684;&#x6570;&#x636E;&#xFF1B;&#x800C;&#x62C9;&#x6A21;&#x578B;&#x662F;&#x4E3B;&#x9898;&#x5BF9;&#x8C61;&#x4E0D;&#x77E5;&#x9053;&#x89C2;&#x5BDF;&#x8005;&#x5BF9;&#x8C61;&#x9700;&#x8981;&#x54EA;&#x4E9B;&#x6570;&#x636E;&#xFF0C;&#x5E72;&#x8106;&#x628A;&#x81EA;&#x8EAB;&#x4F20;&#x7ED9;&#x89C2;&#x5BDF;&#x8005;&#xFF0C;&#x8BA9;&#x89C2;&#x5BDF;&#x8005;&#x81EA;&#x5DF1;&#x6309;&#x9700;&#x53D6;&#x503C;&#x3002;
*
&#x63A8;&#x6A21;&#x578B;&#x53EF;&#x80FD;&#x4F1A;&#x4F7F;&#x5F97;&#x89C2;&#x5BDF;&#x8005;&#x5BF9;&#x8C61;&#x96BE;&#x4EE5;&#x590D;&#x7528;&#xFF0C;&#x56E0;&#x4E3A;&#x89C2;&#x5BDF;&#x8005;&#x7684;update&#x65B9;&#x6CD5;&#x662F;&#x6309;&#x9700;&#x8981;&#x5B9A;&#x4E49;&#x7684;&#x53C2;&#x6570;&#xFF0C;&#x53EF;&#x80FD;&#x65E0;&#x6CD5;&#x517C;&#x987E;&#x6CA1;&#x6709;&#x8003;&#x8651;&#x5230;&#x7684;&#x4F7F;&#x7528;&#x60C5;&#x51B5;&#x3002;&#x8FD9;&#x5C31;&#x610F;&#x5473;&#x7740;&#x51FA;&#x73B0;&#x65B0;&#x7684;&#x60C5;&#x51B5;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5C31;&#x53EF;&#x80FD;&#x63D0;&#x4F9B;&#x65B0;&#x7684;update&#x65B9;&#x6CD5;&#xFF0C;&#x6216;&#x8005;&#x5E72;&#x8106;&#x91CD;&#x65B0;&#x5B9E;&#x73B0;&#x89C2;&#x5BDF;&#x8005;&#xFF1B;&#x800C;&#x62C9;&#x6A21;&#x578B;&#x5C31;&#x4E0D;&#x4F1A;&#x51FA;&#x73B0;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#xFF0C;&#x56E0;&#x4E3A;&#x62C9;&#x6A21;&#x578B;&#x4E0B;&#xFF0C;update&#x65B9;&#x6CD5;&#x7684;&#x53C2;&#x6570;&#x662F;&#x4E3B;&#x9898;&#x5BF9;&#x8C61;&#x672C;&#x8EAB;&#xFF0C;&#x8FD9;&#x57FA;&#x672C;&#x4E0A;&#x662F;&#x4E3B;&#x9898;&#x5BF9;&#x8C61;&#x80FD;&#x4F20;&#x9012;&#x7684;&#x6700;&#x5927;&#x6570;&#x636E;&#x96C6;&#x5408;&#xFF0C;&#x57FA;&#x672C;&#x4E0A;&#x53EF;&#x4EE5;&#x9002;&#x5E94;&#x5404;&#x79CD;&#x60C5;&#x51B5;&#x7684;&#x9700;&#x8981;&#x3002;</li>
</ul>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="策略模式.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page: 策略模式">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"观察者模式","level":"1.5.3","depth":2,"previous":{"title":"策略模式","level":"1.5.2","depth":2,"path":"chapter3/策略模式.md","ref":"chapter3/策略模式.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":[],"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"chapter3/观察者模式.md","mtime":"2021-05-21T06:49:36.142Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2021-05-21T09:00:57.674Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

